<html>
<head>
  <title>実習課題14_2</title>
  <meta http-equiv="Content-Type" content="text/html; charset=shift_jis">
</head>

<body bgcolor="#000000" text="#FFFFFF" vlink="#00FF00" link="#99FFCC">


<h2>実習課題14_2</h2>
<hr>

<p>
<b>【ヒストグラムの出力（コマンドライン引数の利用）】</b><br /><br />
実習課題6_2で作成した exp6_2.c を以下の要件を満たすように書き替えたプログラム<br>
ex14_2.c を作成せよ．
</p>
<ul>
<li>入力ファイル名，出力ファイル名をコマンドライン引数で指定
</li>
<li>プログラム自体を除くコマンドライン引数の数が2以外とのきは適切なメッセジを表示して終了
</li>
<li>関数input_data()，print_hist()はファイルのオープンに失敗した場合は，exit()にて終了
</li>
<li>関数input_data() 内では fgets() と sscanf() の組み合わせでデータを読み込む
</li>
</ul>
<p>
なお，ex14_2.c の以下の変更は認めない．<br>
また，動作確認には CoursePower 上の data_ex14_2.txt を利用せよ．<br>
</p>
<br>

<pre>
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

#define bin_size 10
#define max_size 20
#define d_size 100
#define BUFSIZE 1024

void input_data(char *fname, int d[]);
void make_hist(int d[], int h[][max_size]);
void print_vhist(char *fname, int h[][max_size]);
void check_argnum(int min, int max, int arg_num, char *cmd);
void print_usage(char *cmd);

int main(int argc, char **argv){
	int data[d_size] = {};
	int hist[bin_size][max_size] = {};
	
	check_argnum(3, 3, argc, argv[0]);
	input_data(argv[1], data);
	make_hist(data, hist);
	print_vhist(argv[2], hist);

	return 0;
}

</pre>

<br>

<br /><div class="result">
実行結果例1（赤文字がキーボードからの入力）：<br /><hr style="height:1px"/>
<pre>
$ <font color="#FF0000">./ex14_2.exe data_ex14_2.txt result.txt</font>
Data
3 3 2 9 0 8 2 6 6 9
1 1 3 5 8 3 0 6 9 2
7 7 2 8 0 3 9 2 4 9
1 7 0 4 5 0 4 0 2 4
3 1 0 6 6 1 9 7 5 1
0 4 4 5 9 0 7 6 3 4
4 0 9 0 6 2 2 3 0 9
9 5 5 9 7 9 7 4 6 9
6 4 3 5 7 6 9 4 2 5
3 8 1 0 0 7 5 6 3 1

$ <font color="#FF0000">cat result.txt</font>
Histogram
20|
  |
  |
  |
  |
  |
  | *                 *
  | *                 *
  | *                 *
  | *     * *   *     *
10| *     * *   *     *
  | *   * * * * * *   *
  | * * * * * * * *   *
  | * * * * * * * *   *
  | * * * * * * * *   *
  | * * * * * * * *   *
  | * * * * * * * * * *
  | * * * * * * * * * *
  | * * * * * * * * * *
  | * * * * * * * * * *
  +--------------------
    0 1 2 3 4 5 6 7 8 9

</pre>
<br />

実行結果例1（赤文字がキーボードからの入力）：<br /><hr style="height:1px"/>
<pre>
$ <font color="#FF0000">./ex14_2.exe data_ex14_2.txt</font>
Too few arguments!
Usage
./ex14_2 'input_file' 'output_file'

</pre>
<br />

<p>　</p>
<p>　</p>
<p>　</p>

</body>
</html>
