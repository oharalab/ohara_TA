<html>
<head>
  <title>実習課題15_4</title>
  <meta http-equiv="Content-Type" content="text/html; charset=shift_jis">
</head>

<body bgcolor="#000000" text="#FFFFFF" vlink="#00FF00" link="#99FFCC">


<h2>実習課題15_4</h2>
<hr>

<p>
<b>【ファイルからのデータの読み込みとスタックへの保存】</b><br /><br />
1行ごとに，整数で記述されたIDと実数値のGPAがカンマで区切られて記述されたファイルから，<br>
そのデータを読み込み，単方向リストで実現されたスタックにその値を保持するプログラム ex15_4.c<br>
を作成せよ．具体的には，以下で未実装の各関数を実装することで ex15_4.c を実現すること．<br>
入力ファイルの名前はコマンドライン引数で指定するものとする．<br>
動作確認には，実習課題15_3で作成したファイルを利用すること．<br>
なお，ex15_4.c は以下の部分に各関数の定義を加えるのみとし，以下に示している部分に<br>
関しては，一切の変更・追記は認めない（コメントを除く）．<br>
<font color="#FF0000">以下の部分（コメントを除く）が変更・追記されたプログラムは正しく動作しても 0 点とする．</font><br>
</p>

<pre>
#include&lt;stdio.h&gt;
#include&lt;stdlib.h&gt;

#define  BUFSIZE 1024

typedef struct {
    int ID;
    double GPA;
} my_data;

typedef struct sList{
    my_data data;
    struct sList *next;
} sList;

sList *readData(char *fname);                 // 指定したファイル名からデータをスタックに読み込む関数
void printList(sList *p);                     // リストの末尾から先頭の順にノード内のデータ値を表示する関数
sList *pushNode(sList *root, sList *node);    // スタックへのノードの登録のための関数
sList *newNode(int id, double gpa);           // 新しいノードを生成し，データ値を登録する関数
void check_argnum(int min, int max, int arg_num, char *cmd); 
void print_usage(char *cmd);  

int main(int argc, char **argv){
    sList *root;
	
    check_argnum(2, 2, argc, argv[0]);
    root = readData(argv[1]);
    printList(root);

    return 0;
}

</pre>

<br /><div class="result">
実行例1（赤文字がキーボードからの入力）：<br /><hr style="height:1px"/>
<pre>
$ <font color="#FF0000">./ex15_4.exe data.txt</font>
ID: 1
GPA: 3.778000

ID: 2
GPA: 3.653000

ID: 3
GPA: 1.173000

ID: 4
GPA: 0.357000

ID: 5
GPA: 2.972000

ID: 6
GPA: 3.059000

ID: 7
GPA: 3.526000

ID: 8
GPA: 2.054000

ID: 9
GPA: 0.501000

ID: 10
GPA: 2.106000

</pre>
<br />

</p>

実行例2（赤文字がキーボードからの入力）：<br /><hr style="height:1px"/>
<pre>
$ <font color="#FF0000">./ex15_4.exe</font>
Too few arguments!
Usage
./ex15_3 'input_file'

</pre>
<br />

</p>

</pre>
<br />

</p>

<p>　</p>
<p>　</p>
<p>　</p>

</body>
</html>
