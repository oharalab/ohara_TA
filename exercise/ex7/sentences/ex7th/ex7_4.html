<html>
<head>
  <title>実習課題7_4</title>
  <meta http-equiv="Content-Type" content="text/html; charset=shift_jis">
</head>

<body bgcolor="#000000" text="#FFFFFF" vlink="#00FF00" link="#99FFCC">


<h2>実習課題7_4</h2>
<hr>

<p>
<b>【構造体配列を用いたファイルからの入力】</b><br /><br />
演習7-6 で作成した p7_6.c を1ヶ月分の日経平均株価の終値，始値，高値，安値のデータを<br>
ファイルから読み込めるように変更したい．<br>
演習7-6 および実習課題7_3 を参考に，そのように変更したプログラム ex7_4.c を作成せよ．<br>
具体的には，実習課題7_1，7_3 と同様に，以下のコードに対して関数 read_data() と関数 print_data() を<br>
実装ることで，プログラム ex7_4.c を完成させよ．<br>
関数 read_data() の戻り値はファイルから読み込んだデータ数（日数＝行数）とする．<br>
なお，実習課題7_1 および 7_3 と同様に，関数 read_data() と関数 print_data() を実装する以外は，<br>
以下のコードを変更してはならない（何かを追記することも不可）．<br>

<p>
プログラムの動作確認には，2019年4月の20日分のデータを保存している
<a href="nikkei_stock_prices_201904.csv">nikkei_stock_prices_201904.csv</a> を<br>
作業フォルダに保存して利用せよ．ただし，保存時にファイルの拡張子が .xls などにならないように注意すること．
</p>

<pre>
#include&lt;stdio.h&gt;
#include&lt;stdlib.h&gt;

#define MAXNUM 30
#define BUFSIZE 256

typedef struct {
    double close;
    double open;
    double high;
    double low;
} stock_info;

void print_data(stock_info d[], int n);
int read_data(stock_info d[]);

int main() {
    int num;
    stock_info data[MAXNUM];

    num = read_data(data);
    print_data(data, num);

    return(0);
}
</pre>


<p>
<br /><div class="result">
実行結果例1（赤文字がキーボードからの入力）：<br /><hr style="height:1px"/>
<pre>
データファイルのファイル名を入力してください：<font color="#FF0000">hoge.csv</font>
Can't open the file hoge.csv
</pre>
</p>

<p>
<br /><div class="result">
実行結果例2（赤文字がキーボードからの入力）：<br /><hr style="height:1px"/>
<pre>
データファイルのファイル名を入力してください：<font color="#FF0000">nikkei_stock_prices_201904.csv</font>
1日目の株価
　終値：21509.03
　始値：21500.89
　高値：21682.94
　安値：21471.12
2日目の株価
　終値：21505.31
　始値：21744.64
　高値：21744.64
　安値：21490.56
3日目の株価
　終値：21713.21
　始値：21563.64
　高値：21722.72
　安値：21489.95
4日目の株価
　終値：21724.95
　始値：21724.69
　高値：21787.60
　安値：21662.90
5日目の株価
　終値：21807.50
　始値：21743.14
　高値：21839.18
　安値：21731.34
6日目の株価
　終値：21761.65
　始値：21900.55
　高値：21900.55
　安値：21740.53
7日目の株価
　終値：21802.59
　始値：21750.29
　高値：21811.88
　安値：21698.42
8日目の株価
　終値：21687.57
　始値：21579.68
　高値：21687.57
　安値：21571.67
9日目の株価
　終値：21711.38
　始値：21662.65
　高値：21721.42
　安値：21627.87
10日目の株価
　終値：21870.56
　始値：21782.35
　高値：21878.78
　安値：21698.71
11日目の株価
　終値：22169.11
　始値：22122.97
　高値：22211.03
　安値：22102.93
12日目の株価
　終値：22221.66
　始値：22108.15
　高値：22261.33
　安値：22095.32
13日目の株価
　終値：22277.97
　始値：22236.41
　高値：22345.19
　安値：22185.87
14日目の株価
　終値：22090.12
　始値：22274.13
　高値：22305.63
　安値：22058.39
15日目の株価
　終値：22200.56
　始値：22238.07
　高値：22250.37
　安値：22162.23
16日目の株価
　終値：22217.90
　始値：22188.62
　高値：22280.19
　安値：22099.38
17日目の株価
　終値：22259.74
　始値：22241.74
　高値：22268.37
　安値：22119.94
18日目の株価
　終値：22200.00
　始値：22356.83
　高値：22362.92
　安値：22125.48
19日目の株価
　終値：22307.58
　始値：22183.32
　高値：22334.69
　安値：22155.23
20日目の株価
　終値：22258.73
　始値：22167.48
　高値：22270.29
　安値：22073.10
</pre>
</p>

<p>　</p>
<p>　</p>
<p>　</p>

</body>
</html>
